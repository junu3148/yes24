<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ticketing">
	
	<!-- 결제버튼 클릭시 예매등록 -->
	<insert id="insertTicketing" parameterType="TicketingVO">
		
		<selectKey keyProperty="ticketingSq" resultType="int"
			order="BEFORE">
			SELECT seq_ticketing_sq.NEXTVAL AS ticketingSq FROM dual
		</selectKey>
		
		<![CDATA[
	
			 INSERT INTO ticketing (
								    ticketing_sq,
								    ticketing_date,
								    user_sq
								   ) 
						    VALUES (
								    #{ticketingSq},
								    SYSDATE,
								    #{userSq}
								   )	
										
		
		]]>
		
	</insert>
	
	<!-- 결제 취소시 예매삭제 -->
	<delete id="deleteTicketing" parameterType="UserVO">
	
		<![CDATA[
		
			DELETE ticketing WHERE USER_SQ = #{userSq}
		
		]]>
	
	</delete>
	
	
</mapper>